{"dependencies":[{"name":"date-fns","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":64,"index":64}}],"key":"ebLIABIqb+DSfRpTozlXmEt3BvY=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  exports.computeStreak = computeStreak;\n  exports.getStreakMessage = getStreakMessage;\n  exports.getStreakColor = getStreakColor;\n  var _dateFns = require(_dependencyMap[0], \"date-fns\");\n  /**\n   * Computes the current streak of consecutive days with at least one meal logged\n   * @param mealEntries Array of meal entries from history\n   * @param timezone User's timezone (e.g., 'Asia/Kolkata')\n   * @returns Number of consecutive days including today with at least one meal\n   */\n  function computeStreak(mealEntries, timezone = 'Asia/Kolkata') {\n    if (!mealEntries || mealEntries.length === 0) {\n      return 0;\n    }\n\n    // Convert all meal timestamps to calendar dates in user's timezone\n    const mealDates = mealEntries.map(meal => {\n      const date = typeof meal.timestamp === 'string' ? new Date(meal.timestamp) : meal.timestamp;\n      return (0, _dateFns.startOfDay)(date);\n    }).map(date => (0, _dateFns.format)(date, 'yyyy-MM-dd')).sort((a, b) => b.localeCompare(a)); // Sort descending (newest first)\n\n    // Get unique dates\n    const uniqueDates = Array.from(new Set(mealDates)).sort((a, b) => b.localeCompare(a));\n    if (uniqueDates.length === 0) {\n      return 0;\n    }\n\n    // Get today's date\n    const today = (0, _dateFns.format)((0, _dateFns.startOfDay)(new Date()), 'yyyy-MM-dd');\n\n    // Check if today has a meal\n    if (!uniqueDates.includes(today)) {\n      return 0;\n    }\n\n    // Count consecutive days from today backwards\n    let streak = 1; // Today counts as 1\n    let checkDate = new Date(today);\n    for (let i = 1; i < uniqueDates.length; i++) {\n      // Move back one day\n      checkDate.setDate(checkDate.getDate() - 1);\n      const expectedDate = (0, _dateFns.format)((0, _dateFns.startOfDay)(checkDate), 'yyyy-MM-dd');\n      if (uniqueDates[i] === expectedDate) {\n        streak++;\n      } else {\n        // Gap found, streak broken\n        break;\n      }\n    }\n    return streak;\n  }\n\n  /**\n   * Get appropriate streak message based on streak value\n   */\n  function getStreakMessage(streak) {\n    if (streak === 0) {\n      return \"No streak yet — log your first meal today!\";\n    } else if (streak === 1) {\n      return \"1-day streak — nice start!\";\n    } else {\n      return `${streak}-day streak — keep it up!`;\n    }\n  }\n\n  /**\n   * Get streak color based on value\n   */\n  function getStreakColor(streak) {\n    if (streak === 0) return '#6b7280'; // gray\n    if (streak < 3) return '#f59e0b'; // orange\n    if (streak < 7) return '#10b981'; // green\n    return '#8b5cf6'; // purple for 7+ days\n  }\n});","lineCount":81,"map":[[7,2,14,0,"exports"],[7,9,14,0],[7,10,14,0,"computeStreak"],[7,23,14,0],[7,26,14,0,"computeStreak"],[7,39,14,0],[8,2,66,0,"exports"],[8,9,66,0],[8,10,66,0,"getStreakMessage"],[8,26,66,0],[8,29,66,0,"getStreakMessage"],[8,45,66,0],[9,2,79,0,"exports"],[9,9,79,0],[9,10,79,0,"getStreakColor"],[9,24,79,0],[9,27,79,0,"getStreakColor"],[9,41,79,0],[10,2,1,0],[10,6,1,0,"_dateFns"],[10,14,1,0],[10,17,1,0,"require"],[10,24,1,0],[10,25,1,0,"_dependencyMap"],[10,39,1,0],[11,2,8,0],[12,0,9,0],[13,0,10,0],[14,0,11,0],[15,0,12,0],[16,0,13,0],[17,2,14,7],[17,11,14,16,"computeStreak"],[17,24,14,29,"computeStreak"],[17,25,14,30,"mealEntries"],[17,36,14,54],[17,38,14,56,"timezone"],[17,46,14,72],[17,49,14,75],[17,63,14,89],[17,65,14,99],[18,4,15,2],[18,8,15,6],[18,9,15,7,"mealEntries"],[18,20,15,18],[18,24,15,22,"mealEntries"],[18,35,15,33],[18,36,15,34,"length"],[18,42,15,40],[18,47,15,45],[18,48,15,46],[18,50,15,48],[19,6,16,4],[19,13,16,11],[19,14,16,12],[20,4,17,2],[22,4,19,2],[23,4,20,2],[23,10,20,8,"mealDates"],[23,19,20,17],[23,22,20,20,"mealEntries"],[23,33,20,31],[23,34,21,5,"map"],[23,37,21,8],[23,38,21,10,"meal"],[23,42,21,14],[23,46,21,19],[24,6,22,6],[24,12,22,12,"date"],[24,16,22,16],[24,19,22,19],[24,26,22,26,"meal"],[24,30,22,30],[24,31,22,31,"timestamp"],[24,40,22,40],[24,45,22,45],[24,53,22,53],[24,56,22,56],[24,60,22,60,"Date"],[24,64,22,64],[24,65,22,65,"meal"],[24,69,22,69],[24,70,22,70,"timestamp"],[24,79,22,79],[24,80,22,80],[24,83,22,83,"meal"],[24,87,22,87],[24,88,22,88,"timestamp"],[24,97,22,97],[25,6,23,6],[25,13,23,13],[25,17,23,13,"startOfDay"],[25,25,23,23],[25,26,23,23,"startOfDay"],[25,36,23,23],[25,38,23,24,"date"],[25,42,23,28],[25,43,23,29],[26,4,24,4],[26,5,24,5],[26,6,24,6],[26,7,25,5,"map"],[26,10,25,8],[26,11,25,10,"date"],[26,15,25,14],[26,19,25,19],[26,23,25,19,"format"],[26,31,25,25],[26,32,25,25,"format"],[26,38,25,25],[26,40,25,26,"date"],[26,44,25,30],[26,46,25,32],[26,58,25,44],[26,59,25,45],[26,60,25,46],[26,61,26,5,"sort"],[26,65,26,9],[26,66,26,10],[26,67,26,11,"a"],[26,68,26,12],[26,70,26,14,"b"],[26,71,26,15],[26,76,26,20,"b"],[26,77,26,21],[26,78,26,22,"localeCompare"],[26,91,26,35],[26,92,26,36,"a"],[26,93,26,37],[26,94,26,38],[26,95,26,39],[26,96,26,40],[26,97,26,41],[28,4,28,2],[29,4,29,2],[29,10,29,8,"uniqueDates"],[29,21,29,19],[29,24,29,22,"Array"],[29,29,29,27],[29,30,29,28,"from"],[29,34,29,32],[29,35,29,33],[29,39,29,37,"Set"],[29,42,29,40],[29,43,29,41,"mealDates"],[29,52,29,50],[29,53,29,51],[29,54,29,52],[29,55,29,53,"sort"],[29,59,29,57],[29,60,29,58],[29,61,29,59,"a"],[29,62,29,60],[29,64,29,62,"b"],[29,65,29,63],[29,70,29,68,"b"],[29,71,29,69],[29,72,29,70,"localeCompare"],[29,85,29,83],[29,86,29,84,"a"],[29,87,29,85],[29,88,29,86],[29,89,29,87],[30,4,31,2],[30,8,31,6,"uniqueDates"],[30,19,31,17],[30,20,31,18,"length"],[30,26,31,24],[30,31,31,29],[30,32,31,30],[30,34,31,32],[31,6,32,4],[31,13,32,11],[31,14,32,12],[32,4,33,2],[34,4,35,2],[35,4,36,2],[35,10,36,8,"today"],[35,15,36,13],[35,18,36,16],[35,22,36,16,"format"],[35,30,36,22],[35,31,36,22,"format"],[35,37,36,22],[35,39,36,23],[35,43,36,23,"startOfDay"],[35,51,36,33],[35,52,36,33,"startOfDay"],[35,62,36,33],[35,64,36,34],[35,68,36,38,"Date"],[35,72,36,42],[35,73,36,43],[35,74,36,44],[35,75,36,45],[35,77,36,47],[35,89,36,59],[35,90,36,60],[37,4,38,2],[38,4,39,2],[38,8,39,6],[38,9,39,7,"uniqueDates"],[38,20,39,18],[38,21,39,19,"includes"],[38,29,39,27],[38,30,39,28,"today"],[38,35,39,33],[38,36,39,34],[38,38,39,36],[39,6,40,4],[39,13,40,11],[39,14,40,12],[40,4,41,2],[42,4,43,2],[43,4,44,2],[43,8,44,6,"streak"],[43,14,44,12],[43,17,44,15],[43,18,44,16],[43,19,44,17],[43,20,44,18],[44,4,45,2],[44,8,45,6,"checkDate"],[44,17,45,15],[44,20,45,18],[44,24,45,22,"Date"],[44,28,45,26],[44,29,45,27,"today"],[44,34,45,32],[44,35,45,33],[45,4,47,2],[45,9,47,7],[45,13,47,11,"i"],[45,14,47,12],[45,17,47,15],[45,18,47,16],[45,20,47,18,"i"],[45,21,47,19],[45,24,47,22,"uniqueDates"],[45,35,47,33],[45,36,47,34,"length"],[45,42,47,40],[45,44,47,42,"i"],[45,45,47,43],[45,47,47,45],[45,49,47,47],[46,6,48,4],[47,6,49,4,"checkDate"],[47,15,49,13],[47,16,49,14,"setDate"],[47,23,49,21],[47,24,49,22,"checkDate"],[47,33,49,31],[47,34,49,32,"getDate"],[47,41,49,39],[47,42,49,40],[47,43,49,41],[47,46,49,44],[47,47,49,45],[47,48,49,46],[48,6,50,4],[48,12,50,10,"expectedDate"],[48,24,50,22],[48,27,50,25],[48,31,50,25,"format"],[48,39,50,31],[48,40,50,31,"format"],[48,46,50,31],[48,48,50,32],[48,52,50,32,"startOfDay"],[48,60,50,42],[48,61,50,42,"startOfDay"],[48,71,50,42],[48,73,50,43,"checkDate"],[48,82,50,52],[48,83,50,53],[48,85,50,55],[48,97,50,67],[48,98,50,68],[49,6,52,4],[49,10,52,8,"uniqueDates"],[49,21,52,19],[49,22,52,20,"i"],[49,23,52,21],[49,24,52,22],[49,29,52,27,"expectedDate"],[49,41,52,39],[49,43,52,41],[50,8,53,6,"streak"],[50,14,53,12],[50,16,53,14],[51,6,54,4],[51,7,54,5],[51,13,54,11],[52,8,55,6],[53,8,56,6],[54,6,57,4],[55,4,58,2],[56,4,60,2],[56,11,60,9,"streak"],[56,17,60,15],[57,2,61,0],[59,2,63,0],[60,0,64,0],[61,0,65,0],[62,2,66,7],[62,11,66,16,"getStreakMessage"],[62,27,66,32,"getStreakMessage"],[62,28,66,33,"streak"],[62,34,66,47],[62,36,66,57],[63,4,67,2],[63,8,67,6,"streak"],[63,14,67,12],[63,19,67,17],[63,20,67,18],[63,22,67,20],[64,6,68,4],[64,13,68,11],[64,57,68,55],[65,4,69,2],[65,5,69,3],[65,11,69,9],[65,15,69,13,"streak"],[65,21,69,19],[65,26,69,24],[65,27,69,25],[65,29,69,27],[66,6,70,4],[66,13,70,11],[66,41,70,39],[67,4,71,2],[67,5,71,3],[67,11,71,9],[68,6,72,4],[68,13,72,11],[68,16,72,14,"streak"],[68,22,72,20],[68,49,72,47],[69,4,73,2],[70,2,74,0],[72,2,76,0],[73,0,77,0],[74,0,78,0],[75,2,79,7],[75,11,79,16,"getStreakColor"],[75,25,79,30,"getStreakColor"],[75,26,79,31,"streak"],[75,32,79,45],[75,34,79,55],[76,4,80,2],[76,8,80,6,"streak"],[76,14,80,12],[76,19,80,17],[76,20,80,18],[76,22,80,20],[76,29,80,27],[76,38,80,36],[76,39,80,37],[76,40,80,38],[77,4,81,2],[77,8,81,6,"streak"],[77,14,81,12],[77,17,81,15],[77,18,81,16],[77,20,81,18],[77,27,81,25],[77,36,81,34],[77,37,81,35],[77,38,81,36],[78,4,82,2],[78,8,82,6,"streak"],[78,14,82,12],[78,17,82,15],[78,18,82,16],[78,20,82,18],[78,27,82,25],[78,36,82,34],[78,37,82,35],[78,38,82,36],[79,4,83,2],[79,11,83,9],[79,20,83,18],[79,21,83,19],[79,22,83,20],[80,2,84,0],[81,0,84,1],[81,3]],"functionMap":{"names":["<global>","computeStreak","mealEntries.map$argument_0","mealEntries.map.map$argument_0","mealEntries.map.map.sort$argument_0","Array.from.sort$argument_0","getStreakMessage","getStreakColor"],"mappings":"AAA;OCa;SCO;KDG;SEC,oCF;UGC,4BH;0DIG,4BJ;CDgC;OMK;CNQ;OOK;CPK"},"hasCjsExports":false},"type":"js/module"}]}