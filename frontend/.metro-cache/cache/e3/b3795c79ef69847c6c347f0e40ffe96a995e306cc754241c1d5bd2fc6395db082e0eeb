{"dependencies":[{"name":"date-fns","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":64,"index":64}}],"key":"ebLIABIqb+DSfRpTozlXmEt3BvY=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  exports.computeStreak = computeStreak;\n  exports.getStreakMessage = getStreakMessage;\n  exports.getStreakColor = getStreakColor;\n  var _dateFns = require(_dependencyMap[0], \"date-fns\");\n  /**\n   * Computes the current streak of consecutive days with at least one meal logged\n   * @param mealEntries Array of meal entries from history\n   * @param timezone User's timezone (e.g., 'Asia/Kolkata')\n   * @returns Number of consecutive days including today with at least one meal\n   */\n  function computeStreak(mealEntries) {\n    var timezone = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 'Asia/Kolkata';\n    if (!mealEntries || mealEntries.length === 0) {\n      return 0;\n    }\n\n    // Convert all meal timestamps to calendar dates in user's timezone\n    var mealDates = mealEntries.map(meal => {\n      var date = typeof meal.timestamp === 'string' ? new Date(meal.timestamp) : meal.timestamp;\n      return (0, _dateFns.startOfDay)(date);\n    }).map(date => (0, _dateFns.format)(date, 'yyyy-MM-dd')).sort((a, b) => b.localeCompare(a)); // Sort descending (newest first)\n\n    // Get unique dates\n    var uniqueDates = Array.from(new Set(mealDates)).sort((a, b) => b.localeCompare(a));\n    if (uniqueDates.length === 0) {\n      return 0;\n    }\n\n    // Get today's date\n    var today = (0, _dateFns.format)((0, _dateFns.startOfDay)(new Date()), 'yyyy-MM-dd');\n\n    // Check if today has a meal\n    if (!uniqueDates.includes(today)) {\n      return 0;\n    }\n\n    // Count consecutive days from today backwards\n    var streak = 1; // Today counts as 1\n    var checkDate = new Date(today);\n    for (var i = 1; i < uniqueDates.length; i++) {\n      // Move back one day\n      checkDate.setDate(checkDate.getDate() - 1);\n      var expectedDate = (0, _dateFns.format)((0, _dateFns.startOfDay)(checkDate), 'yyyy-MM-dd');\n      if (uniqueDates[i] === expectedDate) {\n        streak++;\n      } else {\n        // Gap found, streak broken\n        break;\n      }\n    }\n    return streak;\n  }\n\n  /**\n   * Get appropriate streak message based on streak value\n   */\n  function getStreakMessage(streak) {\n    if (streak === 0) {\n      return \"No streak yet — log your first meal today!\";\n    } else if (streak === 1) {\n      return \"1-day streak — nice start!\";\n    } else {\n      return `${streak}-day streak — keep it up!`;\n    }\n  }\n\n  /**\n   * Get streak color based on value\n   */\n  function getStreakColor(streak) {\n    if (streak === 0) return '#6b7280'; // gray\n    if (streak < 3) return '#f59e0b'; // orange\n    if (streak < 7) return '#10b981'; // green\n    return '#8b5cf6'; // purple for 7+ days\n  }\n});","lineCount":82,"map":[[7,2,14,0,"exports"],[7,9,14,0],[7,10,14,0,"computeStreak"],[7,23,14,0],[7,26,14,0,"computeStreak"],[7,39,14,0],[8,2,66,0,"exports"],[8,9,66,0],[8,10,66,0,"getStreakMessage"],[8,26,66,0],[8,29,66,0,"getStreakMessage"],[8,45,66,0],[9,2,79,0,"exports"],[9,9,79,0],[9,10,79,0,"getStreakColor"],[9,24,79,0],[9,27,79,0,"getStreakColor"],[9,41,79,0],[10,2,1,0],[10,6,1,0,"_dateFns"],[10,14,1,0],[10,17,1,0,"require"],[10,24,1,0],[10,25,1,0,"_dependencyMap"],[10,39,1,0],[11,2,8,0],[12,0,9,0],[13,0,10,0],[14,0,11,0],[15,0,12,0],[16,0,13,0],[17,2,14,7],[17,11,14,16,"computeStreak"],[17,24,14,29,"computeStreak"],[17,25,14,30,"mealEntries"],[17,36,14,54],[17,38,14,99],[18,4,14,99],[18,8,14,56,"timezone"],[18,16,14,72],[18,19,14,72,"arguments"],[18,28,14,72],[18,29,14,72,"length"],[18,35,14,72],[18,43,14,72,"arguments"],[18,52,14,72],[18,60,14,72,"undefined"],[18,69,14,72],[18,72,14,72,"arguments"],[18,81,14,72],[18,87,14,75],[18,101,14,89],[19,4,15,2],[19,8,15,6],[19,9,15,7,"mealEntries"],[19,20,15,18],[19,24,15,22,"mealEntries"],[19,35,15,33],[19,36,15,34,"length"],[19,42,15,40],[19,47,15,45],[19,48,15,46],[19,50,15,48],[20,6,16,4],[20,13,16,11],[20,14,16,12],[21,4,17,2],[23,4,19,2],[24,4,20,2],[24,8,20,8,"mealDates"],[24,17,20,17],[24,20,20,20,"mealEntries"],[24,31,20,31],[24,32,21,5,"map"],[24,35,21,8],[24,36,21,10,"meal"],[24,40,21,14],[24,44,21,19],[25,6,22,6],[25,10,22,12,"date"],[25,14,22,16],[25,17,22,19],[25,24,22,26,"meal"],[25,28,22,30],[25,29,22,31,"timestamp"],[25,38,22,40],[25,43,22,45],[25,51,22,53],[25,54,22,56],[25,58,22,60,"Date"],[25,62,22,64],[25,63,22,65,"meal"],[25,67,22,69],[25,68,22,70,"timestamp"],[25,77,22,79],[25,78,22,80],[25,81,22,83,"meal"],[25,85,22,87],[25,86,22,88,"timestamp"],[25,95,22,97],[26,6,23,6],[26,13,23,13],[26,17,23,13,"startOfDay"],[26,25,23,23],[26,26,23,23,"startOfDay"],[26,36,23,23],[26,38,23,24,"date"],[26,42,23,28],[26,43,23,29],[27,4,24,4],[27,5,24,5],[27,6,24,6],[27,7,25,5,"map"],[27,10,25,8],[27,11,25,10,"date"],[27,15,25,14],[27,19,25,19],[27,23,25,19,"format"],[27,31,25,25],[27,32,25,25,"format"],[27,38,25,25],[27,40,25,26,"date"],[27,44,25,30],[27,46,25,32],[27,58,25,44],[27,59,25,45],[27,60,25,46],[27,61,26,5,"sort"],[27,65,26,9],[27,66,26,10],[27,67,26,11,"a"],[27,68,26,12],[27,70,26,14,"b"],[27,71,26,15],[27,76,26,20,"b"],[27,77,26,21],[27,78,26,22,"localeCompare"],[27,91,26,35],[27,92,26,36,"a"],[27,93,26,37],[27,94,26,38],[27,95,26,39],[27,96,26,40],[27,97,26,41],[29,4,28,2],[30,4,29,2],[30,8,29,8,"uniqueDates"],[30,19,29,19],[30,22,29,22,"Array"],[30,27,29,27],[30,28,29,28,"from"],[30,32,29,32],[30,33,29,33],[30,37,29,37,"Set"],[30,40,29,40],[30,41,29,41,"mealDates"],[30,50,29,50],[30,51,29,51],[30,52,29,52],[30,53,29,53,"sort"],[30,57,29,57],[30,58,29,58],[30,59,29,59,"a"],[30,60,29,60],[30,62,29,62,"b"],[30,63,29,63],[30,68,29,68,"b"],[30,69,29,69],[30,70,29,70,"localeCompare"],[30,83,29,83],[30,84,29,84,"a"],[30,85,29,85],[30,86,29,86],[30,87,29,87],[31,4,31,2],[31,8,31,6,"uniqueDates"],[31,19,31,17],[31,20,31,18,"length"],[31,26,31,24],[31,31,31,29],[31,32,31,30],[31,34,31,32],[32,6,32,4],[32,13,32,11],[32,14,32,12],[33,4,33,2],[35,4,35,2],[36,4,36,2],[36,8,36,8,"today"],[36,13,36,13],[36,16,36,16],[36,20,36,16,"format"],[36,28,36,22],[36,29,36,22,"format"],[36,35,36,22],[36,37,36,23],[36,41,36,23,"startOfDay"],[36,49,36,33],[36,50,36,33,"startOfDay"],[36,60,36,33],[36,62,36,34],[36,66,36,38,"Date"],[36,70,36,42],[36,71,36,43],[36,72,36,44],[36,73,36,45],[36,75,36,47],[36,87,36,59],[36,88,36,60],[38,4,38,2],[39,4,39,2],[39,8,39,6],[39,9,39,7,"uniqueDates"],[39,20,39,18],[39,21,39,19,"includes"],[39,29,39,27],[39,30,39,28,"today"],[39,35,39,33],[39,36,39,34],[39,38,39,36],[40,6,40,4],[40,13,40,11],[40,14,40,12],[41,4,41,2],[43,4,43,2],[44,4,44,2],[44,8,44,6,"streak"],[44,14,44,12],[44,17,44,15],[44,18,44,16],[44,19,44,17],[44,20,44,18],[45,4,45,2],[45,8,45,6,"checkDate"],[45,17,45,15],[45,20,45,18],[45,24,45,22,"Date"],[45,28,45,26],[45,29,45,27,"today"],[45,34,45,32],[45,35,45,33],[46,4,47,2],[46,9,47,7],[46,13,47,11,"i"],[46,14,47,12],[46,17,47,15],[46,18,47,16],[46,20,47,18,"i"],[46,21,47,19],[46,24,47,22,"uniqueDates"],[46,35,47,33],[46,36,47,34,"length"],[46,42,47,40],[46,44,47,42,"i"],[46,45,47,43],[46,47,47,45],[46,49,47,47],[47,6,48,4],[48,6,49,4,"checkDate"],[48,15,49,13],[48,16,49,14,"setDate"],[48,23,49,21],[48,24,49,22,"checkDate"],[48,33,49,31],[48,34,49,32,"getDate"],[48,41,49,39],[48,42,49,40],[48,43,49,41],[48,46,49,44],[48,47,49,45],[48,48,49,46],[49,6,50,4],[49,10,50,10,"expectedDate"],[49,22,50,22],[49,25,50,25],[49,29,50,25,"format"],[49,37,50,31],[49,38,50,31,"format"],[49,44,50,31],[49,46,50,32],[49,50,50,32,"startOfDay"],[49,58,50,42],[49,59,50,42,"startOfDay"],[49,69,50,42],[49,71,50,43,"checkDate"],[49,80,50,52],[49,81,50,53],[49,83,50,55],[49,95,50,67],[49,96,50,68],[50,6,52,4],[50,10,52,8,"uniqueDates"],[50,21,52,19],[50,22,52,20,"i"],[50,23,52,21],[50,24,52,22],[50,29,52,27,"expectedDate"],[50,41,52,39],[50,43,52,41],[51,8,53,6,"streak"],[51,14,53,12],[51,16,53,14],[52,6,54,4],[52,7,54,5],[52,13,54,11],[53,8,55,6],[54,8,56,6],[55,6,57,4],[56,4,58,2],[57,4,60,2],[57,11,60,9,"streak"],[57,17,60,15],[58,2,61,0],[60,2,63,0],[61,0,64,0],[62,0,65,0],[63,2,66,7],[63,11,66,16,"getStreakMessage"],[63,27,66,32,"getStreakMessage"],[63,28,66,33,"streak"],[63,34,66,47],[63,36,66,57],[64,4,67,2],[64,8,67,6,"streak"],[64,14,67,12],[64,19,67,17],[64,20,67,18],[64,22,67,20],[65,6,68,4],[65,13,68,11],[65,57,68,55],[66,4,69,2],[66,5,69,3],[66,11,69,9],[66,15,69,13,"streak"],[66,21,69,19],[66,26,69,24],[66,27,69,25],[66,29,69,27],[67,6,70,4],[67,13,70,11],[67,41,70,39],[68,4,71,2],[68,5,71,3],[68,11,71,9],[69,6,72,4],[69,13,72,11],[69,16,72,14,"streak"],[69,22,72,20],[69,49,72,47],[70,4,73,2],[71,2,74,0],[73,2,76,0],[74,0,77,0],[75,0,78,0],[76,2,79,7],[76,11,79,16,"getStreakColor"],[76,25,79,30,"getStreakColor"],[76,26,79,31,"streak"],[76,32,79,45],[76,34,79,55],[77,4,80,2],[77,8,80,6,"streak"],[77,14,80,12],[77,19,80,17],[77,20,80,18],[77,22,80,20],[77,29,80,27],[77,38,80,36],[77,39,80,37],[77,40,80,38],[78,4,81,2],[78,8,81,6,"streak"],[78,14,81,12],[78,17,81,15],[78,18,81,16],[78,20,81,18],[78,27,81,25],[78,36,81,34],[78,37,81,35],[78,38,81,36],[79,4,82,2],[79,8,82,6,"streak"],[79,14,82,12],[79,17,82,15],[79,18,82,16],[79,20,82,18],[79,27,82,25],[79,36,82,34],[79,37,82,35],[79,38,82,36],[80,4,83,2],[80,11,83,9],[80,20,83,18],[80,21,83,19],[80,22,83,20],[81,2,84,0],[82,0,84,1],[82,3]],"functionMap":{"names":["<global>","computeStreak","mealEntries.map$argument_0","mealEntries.map.map$argument_0","mealEntries.map.map.sort$argument_0","Array.from.sort$argument_0","getStreakMessage","getStreakColor"],"mappings":"AAA;OCa;SCO;KDG;SEC,oCF;UGC,4BH;0DIG,4BJ;CDgC;OMK;CNQ;OOK;CPK"},"hasCjsExports":false},"type":"js/module"}]}